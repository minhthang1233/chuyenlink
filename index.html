<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link Modifier</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        textarea {
            width: 100%;
            height: 150px;
        }
        .result {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }
        button {
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <h2>Thêm Tiền Tố vào Liên Kết</h2>
    <textarea id="inputText" placeholder="Nhập văn bản chứa liên kết..."></textarea><br><br>
    <button onclick="modifyLinks()">Thêm tiền tố</button>

    <div class="result">
        <h3>Kết quả:</h3>
        <p id="outputText"></p>
        <button onclick="copyResult()">Copy Kết Quả</button>
    </div>

    <script>
        function modifyLinks() {
            let inputText = document.getElementById('inputText').value;

            // Regex để tìm các liên kết bắt đầu với https:// hoặc không có http://
            let outputText = inputText.replace(/(?:https:\/\/|)(\S*shopee\S+)/g, function(match) {
                // Thêm tiền tố https:// nếu link không có
                if (!match.startsWith('https://')) {
                    match = 'https://' + match;
                }
                
                // Chuyển đổi thành dạng link với tiền tố mới mà không mã hóa
                let newLink = `https://shope.ee/an_redir?origin_link=${match}&affiliate_id=17305270177&sub_id=0`;
                return newLink;
            });

            // Hiển thị kết quả
            document.getElementById('outputText').innerText = outputText;
        }

        function copyResult() {
            // Tạo một thẻ textarea tạm thời để sao chép nội dung
            let outputText = document.getElementById('outputText').innerText;
            let tempTextarea = document.createElement('textarea');
            tempTextarea.value = outputText;
            document.body.appendChild(tempTextarea);
            tempTextarea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextarea);
            alert("Kết quả đã được sao chép!");
        }
    </script>

</body>
</html>
